<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" name="Author" content="Douglas Lau"/>
	<link href="iris_doc.css" rel="stylesheet" type="text/css"/>
	<title>IRIS Administrator Guide</title>
	<script type="text/javascript" src="admin_guide.js"></script>
</head>

<body>
<nav class="sidebar">
  <h1><a id="contents_link" href="#admin_guide">Contents</a></h1>
  <div id="contents_div"><!-- div required for js, DO NOT REMOVE --></div>
  <h2><a id="overview_link" href="#overview">Overview</a></h2>
  <div id="overview_div">
    <h3><a href="#architecture">System Architecture</a></h3>
    <h3><a href="#advanced_features">Advanced Features</a></h3>
  </div>
  <h2><a id="installation_link" href="#installation">Installation</a></h2>
  <div id="installation_div">
    <h3><a href="#operating_system">Operating System</a></h3>
    <h3><a href="#install_iris">Install IRIS</a></h3>
    <h3><a href="#init_iris">Initialize IRIS</a></h3>
    <h3><a href="#server_properties">Server Properties</a></h3>
    <h3><a href="#start_services">Start Services</a></h3>
    <h3><a href="#initial_login">Initial Login</a></h3>
  </div>
  <h2><a id="basic_setup_link" href="#basic_setup">Basic Setup</a></h2>
  <div id="basic_setup_div">
    <h3><a href="#client_properties">Client Properties</a></h3>
    <h3><a href="#user_properties">User Properties</a></h3>
    <h3><a href="user_interface.html#edit-mode">Edit Mode</a></h3>
    <h3><a href="system_attributes.html">System Attributes</a></h3>
    <h3><a href="user_roles.html">User Roles</a></h3>
    <h3><a href="mapping.html">Mapping</a></h3>
    <h3><a href="road_topology.html">Road Topology</a></h3>
    <h3><a href="#comm_links">Comm Links</a></h3>
    <h3><a href="controllers.html">Controllers</a></h3>
    <h3><a href="fonts.html">Fonts</a></h3>
  </div>
  <h2><a id="devices_link" href="controllers.html#devices">Devices</a></h2>
  <div id="devices_div">
    <h3><a href="dms.html">Dynamic Message Signs</a></h3>
    <h3><a href="lcs.html">Lane-Use Control Signs</a></h3>
    <h3><a href="vehicle_detection.html">Vehicle Detection</a></h3>
    <h3><a href="cameras.html">Cameras</a></h3>
    <h3><a href="video.html">Video Monitors</a></h3>
    <h3><a href="ramp_meters.html">Ramp Meters</a></h3>
    <h3><a href="gate_arms.html">Gate Arms</a></h3>
    <h3><a href="tolling.html#tag-readers">Tag Readers</a></h3>
    <h3><a href="beacons.html">Beacons</a></h3>
    <h3><a href="alarms.html">Alarms</a></h3>
    <h3><a href="rwis.html">Road Weather Information Systems</a></h3>
    <h3><a href="gps.html">GPS</a></h3>
  </div>
  <h2><a id="features_link" href="#features">Features</a></h2>
  <div id="features_div">
    <h3><a href="vehicle_detection.html#traffic-layer">Traffic Map Layer</a></h3>
    <h3><a href="incidents.html">Incident Management</a></h3>
    <h3><a href="action_plans.html">Action Plans</a></h3>
    <h3><a href="ramp_meters.html#metering-strategies">Ramp Metering Strategies</a></h3>
    <h3><a href="travel_time.html">Travel Time Estimation</a></h3>
    <h3><a href="slow_warning.html">Slow Traffic Warning</a></h3>
    <h3><a href="tolling.html">Tolling</a></h3>
    <h3><a href="parking_areas.html">Parking Area Availability</a></h3>
    <h3><a href="vsa.html">Variable Speed Advisory</a></h3>
  </div>
  <h2><a id="troubleshooting_link" href="troubleshooting.html">Troubleshooting</a></h2>
  <h2><a id="maintenance_link" href="maintenance.html">Maintenance</a></h2>
  <h2><a id="development_link" href="development.html">Development</a></h2>
  <h2><a id="stepbystep_link" href="step_by_step.html">Step-by-Step</a></h2>
</nav>

<main class="mainbar">
<header>
<div id="stamp">1 Oct 2019</div>
</header>
<h1 id="admin_guide"><span class="left"><img src="iris_icon.svg"/></span>
	IRIS Administrator Guide</h1>

<h2 id="overview">Overview</h2>
<p>
	IRIS is an <a href="http://www.opensource.org/docs/osd">open source</a>
	advanced traffic management system.
	It provides an integrated platform for transportation agencies to
	manage traffic monitoring and control devices.
	The software is written in <a href="http://www.java.com">Java</a> and
	licensed for anyone to use under the
	<a href="http://www.gnu.org/licenses/old-licenses/gpl-2.0.html">GPL</a>.
	In addition, all dependencies required to install and operate an IRIS
	system are available as free software.
	IRIS stands for Intelligent Roadway Information System.
</p>
<p>
	The IRIS software presents an intuitive map-based interface to system
	operators.
	This user interface has been refined over many iterations by getting
	feedback from operators to streamline their workflow.
</p>

<h3 id="architecture">System Architecture</h3>

<figure>
<svg class="right" xmlns="http://www.w3.org/2000/svg" version="1.1"
     width="640" height="480">
  <title>System Architecture</title>
  <defs>
    <marker id="Arrow1Mend" orient="auto" style="overflow:visible">
      <path d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
            transform="matrix(-0.4,0,0,-0.4,-4,0)"
            style="stroke:#000;stroke-width:1pt;marker-start:none"/>
    </marker>
  </defs>
  <g style="font-size:20px;font-family:Liberation Sans">
    <text style="font-size:28px">
      <tspan x="384" y="64">IRIS System</tspan>
      <tspan x="384" y="94">Architecture</tspan>
    </text>
    <g transform="translate(112,24)">
      <g style="fill:#c4f9ff;stroke:#000;stroke-width:2">
        <g style="opacity:0.5">
          <rect x="16" y="16" width="200" height="88" ry="8"
                style="opacity:0.5"/>
          <rect x="8" y="8" width="200" height="88" ry="8"/>
        </g>
        <rect x="0" y="0" width="200" height="88" ry="8"/>
      </g>
      <text>
        <tspan x="48" y="48">IRIS Clients</tspan>
      </text>
    </g>
    <g transform="translate(16,176)">
      <rect x="0" y="0" width="176" height="104" ry="8"
        style="fill:#ffe6c4;stroke:#000;stroke-width:2"/>
      <text>
        <tspan x="16" y="40">Apache Server</tspan>
        <tspan x="24" y="60">- Client JARs</tspan>
        <tspan x="24" y="80">- Map Tiles</tspan>
      </text>
    </g>
    <g transform="translate(232,176)">
      <rect x="0" y="0" width="192" height="120" ry="8"
            style="fill:#e2c4ff;stroke:#000;stroke-width:2"/>
      <text>
        <tspan x="40" y="60">IRIS Server</tspan>
      </text>
    </g>
    <g transform="translate(464,188)">
      <rect x="0" y="0" width="160" height="108" ry="8"
        style="fill:#d0ffc4;stroke:#000;stroke-width:2"/>
      <text style="font-size:18px">
        <tspan x="16" y="40">Authentication</tspan>
        <tspan x="16" y="60">Server (LDAP)</tspan>
        <tspan x="32" y="80" style="font-style:italic">(Optional)</tspan>
      </text>
    </g>
    <g transform="translate(16,340)">
      <rect x="0" y="0" width="144" height="88" ry="8"
        style="fill:#f6ffc4;stroke:#000;stroke-width:2" />
      <text>
        <tspan x="16" y="40">Honeybee</tspan>
        <tspan x="24" y="60">- JSON files</tspan>
      </text>
    </g>
    <g transform="translate(200,360)">
      <rect x="0" y="0" width="152" height="88" ry="8"
        style="fill:#c4d1ff;stroke:#000;stroke-width:2" />
      <text>
        <tspan x="16" y="40">Database</tspan>
        <tspan x="16" y="60">(PostgreSQL)</tspan>
      </text>
    </g>
    <g transform="translate(392,360)">
      <g style="fill:#f6ffc4;stroke:#000;stroke-width:2">
        <g style="opacity:0.5">
          <rect x="16" y="16" width="208" height="88" ry="8"
                style="opacity:0.5"/>
          <rect x="8" y="8" width="208" height="88" ry="8"/>
        </g>
        <rect x="0" y="0" width="208" height="88" ry="8"/>
      </g>
      <text style="font-size:18px">
        <tspan x="16" y="40">Traffic Monitoring</tspan>
        <tspan x="16" y="60">and Control Devices</tspan>
      </text>
    </g>
    <g style="stroke:#000;stroke-width:2;marker-end:url(#Arrow1Mend)">
      <path d="m 176,112 -32,64"/>
      <path d="m 256,112 32,64"/>
      <path d="m 424,240 40,8"/>
      <path d="m 160,374 40,16"/>
      <path d="m 300,296 -32,64"/>
      <path d="m 392,296 32,64"/>
    </g>
  </g>
</svg>
</figure>

<p>
	The software has a client/server architecture.
	System configuration data is stored in a
	<a href="http://www.postgresql.org">PostgreSQL</a> database,
	and managed by the IRIS server.
	The server also handles communication with all traffic control and
	data collection devices.
	The client software is distributed by an <a
	href="http://projects.apache.org/projects/http_server.html">Apache</a>
	web server, using Java Web Start.
	All communication between the server and clients is encrypted using
	secure socket layer (SSL).
	The server may be configured to pass authentication requests off to an
	external LDAP server, allowing IRIS to integrate into an existing
	authentication system.
</p>

<h3 id="advanced_features">Advanced Features</h3>
<p>
	IRIS contains these higher-level traffic management features:
</p>
<ul>
	<li>Continuously updated <a href="vehicle_detection.html#traffic-layer">traffic layer</a>
	</li>
	<li><a href="incidents.html">Incident management</a></li>
	<li><a href="action_plans.html">Scheduled</a> deployment of control
	    devices</li>
	<li>Co√∂rdinated <a href="ramp_meters.html#metering-strategies">ramp
	    metering strategies</a></li>
	<li><a href="travel_time.html">Travel time</a> estimation</li>
	<li><a href="slow_warning.html">Slow traffic warning</a></li>
	<li><a href="tolling.html">Toll</a> lane operation</li>
	<li><a href="parking_areas.html">Parking area</a> availability</li>
</ul>

<h2 id="installation">Installation</h2>
<p/>

<h3 id="operating_system">Operating System</h3>
<p>
	Install <a href="http://fedoraproject.org">Fedora</a> onto the server
	computer.
	Other operating systems, such as Red Hat Enterprise Linux, can also be
	used, but the procedures may vary slightly.
	This machine should have a minimum of 2 GB of RAM and 200 GB hard drive
	storage space.
	The IRIS server does not have a GUI interface, so this computer can be
	set up headless.
</p>
<p>
	After the operating system is installed, make sure the hostname is
	configured correctly in DNS.
	The hostname is needed for some configuration files in the following
	steps.
	The following command should display the hostname that can be used to
	access the server:
</p>
<pre class="code">hostname -f</pre>

<h3 id="install_iris">Install IRIS</h3>
<p>
	<a href="http://iris.dot.state.mn.us/rpms/">Download</a> and install
	the IRIS package.
	This should be a file called
	<b>iris-<i>{major}</i>.<i>{minor}</i>.<i>{micro}</i>-<i>{build}</i>.<i>{arch}</i>.rpm</b>.
	The <i>{major}</i>, <i>{minor}</i>, and <i>{micro}</i> version numbers
	and the <i>{build}</i> number can change with each release.
	The system architecture, <i>{arch}</i>, will be <i>noarch</i>,
	since Java is architecture independent.
	It can be installed with the following command (as root):
</p>
<pre class="code">dnf install iris-<i>{major}</i>.<i>{minor}</i>.<i>{micro}</i>-<i>{build}</i>.noarch.rpm</pre>
<p>
	This will install dependencies not already installed, including
	<a href="http://openjdk.java.net">OpenJDK</a>,
	<a href="http://www.postgresql.org">PostgreSQL</a> and
	<a href="http://projects.apache.org/projects/http_server.html">Apache</a>.
</p>
<h3 id="init_iris">Initialize IRIS</h3>
<p>
	Next, you must initialize the IRIS server installation.
	Run the following command (as root):
</p>
<pre class="code">iris_ctl init</pre>
<p>
	This command will perform the following steps:
</p>
<ol>
	<li>
		Update the <code>/etc/iris/iris-client.properties</code> file
		with the server's hostname.
	</li>
	<li>
		Create an SSL key pair for encrypted communication between the
		server and clients.
		The keystore files are
		<code>/etc/iris/iris-server.keystore</code> and
		<code>/etc/iris/iris-client.keystore</code>.
		The keystore passwords are put into
		<code>/etc/iris/iris-server.properties</code> and
		<code>/etc/iris/iris-client.properties</code>.
	</li>
	<li>
		Create a symbolic link to the PostgreSQL JDBC driver to make it
		available to the IRIS server.
	</li>
	<li>
		Create the database cluster and start the PostgreSQL server.
	</li>
	<li>
		Create the <code>osm</code> databsae (for OpenStreetMap data).
	</li>
	<li>
		Create the <code>tms</code> PostgreSQL user, which IRIS uses to
		connect to the database.
	</li>
	<li>
		Create the <code>tms</code> database and populate it using a
		template SQL script.
	</li>
	<li>
		Configure the apache (httpd) and IRIS services to start
		automatically.
	</li>
	<li>
		Create symbolic links to the current IRIS software version.
	</li>
</ol>
<p>
	The command should finish with the following message:
</p>
<pre>Successfully initialized the IRIS server</pre>

<h3 id="server_properties">Server Properties</h3>
<p>
	The IRIS server has a configuration file which controls some of its
	basic settings &mdash; <i>/etc/iris/iris-server.properties</i>.
	Most of the default settings should work, but it may be necessary to
	make some changes.
	The file can be modified using a text editor, such as <i>gedit</i> or
	<i>vi</i>.
</p>
<h4>Internationalization</h4>
<p>
	There are three properties which control internationalization (i18n).
	They are <i>language</i>, <i>country</i> and <i>variant</i>.
	These should only be changed if the IRIS software has been localized
	for a specific locale.
</p>
<h4 id="district">District</h4>
<p>
	This property allows multiple IRIS servers to exist within the same
	organization.
	The default value is <code>tms</code>.
</p>
<h4>HTTP Proxy</h4>
<p>
	These properties can be used when IRIS must connect to HTTP servers
	using a proxy server, due to organization firewall policies.
</p>
<h4>Database Connection</h4>
<p>
	The <i>db.url</i>, <i>db.user</i> and <i>db.password</i> properties
	control how the IRIS server connects to the PostgreSQL database.
	None of these properties should be changed, since they were configured
	earlier by the <code>iris_ctl</code> script.
</p>
<h4 id="sonar_config">SONAR Configuration</h4>
<p>
	The <i>sonar.ldap.urls</i> property can be used to let IRIS pass user
	authentication requests to one or more LDAP servers.
	Multiple URLs must be separated by a space.
	IRIS can manage user accounts and passwords without an LDAP server, but
	this feature allows operators to log into IRIS without requiring them to
	remember an additional user name and password.
	If your organization already has an LDAP server, such as Active
	Directory, you should use that.
</p>
<p>
	The URL protocol is normally <i>ldap:</i>, but must be <i>ldaps:</i>
	for encrypted communication over SSL.
	To use ldaps, you must first import the SSL certificate into the IRIS
	keystore.
	Once you have obtained the SSL certificate for the LDAP server, save it
	as <i>ldap.cert</i>.
	Now you can import it with the following command (as root):
</p>
<pre class="code">keytool -import -alias ldap-cert -keystore /etc/iris/iris-server.keystore -file ldap.cert</pre>
<p>
	The <i>keystore.password</i> is used for accessing keys in
	<code>/etc/iris/iris-server.keystore</code>.
	This password is automatically generated by the <code>iris_ctl</code>
	script.
	It will not need to be changed.
</p>

<h3 id="start_services">Start Services</h3>
<p>
	Finally, the IRIS server can now be started with the following command:
</p>
<pre class="code">systemctl start iris</pre>
<p>
	Check that everything started OK:
</p>
<pre class="code">tail /var/log/iris/iris.stderr
systemctl status iris</pre>
<p>
	This should indicate that IRIS is active and running.
</p>

<h3 id="initial_login">Initial Login</h3>
<p>
	From a client computer with Java installed, point your web browser at
	http://YOUR_SERVER_NAME/iris-client/.
	From there, you should be able to launch the IRIS client Web Start
	application and log in.
</p>
<p>
	Enter <code>admin</code> as the username and <code>atms_242</code> as
	the password for the initial login.
	After <a href="user_roles.html">creating</a> and logging in with a
	real administrator account, the <code>admin</code> user account should
	be disabled.
</p>

<h2 id="basic_setup">Basic Setup</h2>
<br/>

<h3 id="client_properties">Client Properties</h3>
<p>
	The IRIS server has a configuration file which contains default
	properties for clients &mdash; <i>/etc/iris/iris-client.properties</i>.
	These properties include internationalization, network proxy, and other
	system configuration.
	Note that even though IRIS has been internationalized, it has not yet
	been translated to languages other than english.
</p>
<dl>
	<dt>language</dt>
	<dd>
		ISO 639 alpha-2 or alpha-3 language code.
		E.g., "en", "es", "fr".
	</dd>
	<dt>country</dt>
	<dd>
		ISO 3166 alpha-2 country code or UN M.49 numeric-3 area code.
		E.g., "US", "MX", "CA".
	</dd>
	<dt>variant</dt>
	<dd>
		IETF BCP 47 language variant subtag.
	</dd>
	<dt>district</dt>
	<dd>
		District name.
		Useful in cases where multiple IRIS servers exist within the
		same organization.
	</dd>
	<dt>http.proxy</dt>
	<dd>
		List of HTTP proxy settings (used for downloading map tiles,
		XML files, etc.)
	</dd>
	<dt>http.proxy.whitelist</dt>
	<dd>
		A list of addresses to bypass using proxy server.
		Addresses are in CIDR notation (exact IP, or ranges specified
		such as 192.168.1.0/24).
	</dd>
	<dt>keystore.file</dt>
	<dd>
		URL for the client keystore file.
	</dd>
	<dt>keystore.password</dt>
	<dd>
		Password for the client keystore.
	</dd>
	<dt>sonar.host</dt>
	<dd>
		IP or hostname of the SONAR server.
	</dd>
	<dt>sonar.port</dt>
	<dd>
		TCP port number of the SONAR server.
	</dd>
	<dt>tdxml.detector.url</dt>
	<dd>
		URL for XML detector stream.
	</dd>
	<dt>map.tile.url</dt>
	<dd>
		Base URL for map tileset.
		Must end in "/".
	</dd>
	<dt>video.host</dt>
	<dd>
		IP or hostname of video server/proxy.
	</dd>
	<dt>video.port</dt>
	<dd>
		TCP port number of video server/proxy.
	</dd>
	<dt>video.extviewer</dt>
	<dd>
		External video viewer.
	</dd>
	<dt>autologin.username</dt>
	<dd>
		A username to be used for automatic login upon client startup.
		Note: use of this property is a security risk.
	</dd>
	<dt>autologin.password</dt>
	<dd>
		A password to be used for automatic login upon client startup.
		Note: use of this property is a security risk.
	</dd>
	<dt>tab.list</dt>
	<dd>
		A list specifying the visibility and ordering of the primary UI
		tabs in the IRIS client.
		The default value is:
		<code>incident, dms, camera, lcs, ramp.meter, gate.arm, r_node,
		      action.plan, comm</code>
	</dd>
	<dt>scale</dt>
	<dd>
		User interface scaling factor (0.25 to 4.0).
		Useful for Hi-DPI screens.
	</dd>
</dl>

<h3 id="user_properties">User Properties</h3>
<p>
	The IRIS client also reads a property file on client computers.
	The file is named "user.properties", and can be found in the "iris"
	folder of the user's home directory.
	It can contain overrides for any of the default values in the
	<a href="#client_properties">client properties</a> file.
	The file is overwritten when logging out.
	The window geometry and last selected tab will be updated,
	but all other properties will be left unchanged.
</p>

</main>

</body>
</html>
